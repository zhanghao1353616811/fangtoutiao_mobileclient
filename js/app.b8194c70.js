(function(t){function e(e){for(var a,i,o=e[0],c=e[1],l=e[2],u=0,f=[];u<o.length;u++)i=o[u],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&f.push(s[i][0]),s[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);h&&h(e);while(f.length)f.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],a=!0,i=1;i<n.length;i++){var c=n[i];0!==s[c]&&(a=!1)}a&&(r.splice(e--,1),t=o(o.s=n[0]))}return t}var a={},s={app:0},r=[];function i(t){return o.p+"js/"+({}[t]||t)+"."+{"chunk-2d0b9f65":"52f3213e","chunk-2d0d5f6f":"0f2b55de","chunk-2d2268ce":"617e7182"}[t]+".js"}function o(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.e=function(t){var e=[],n=s[t];if(0!==n)if(n)e.push(n[2]);else{var a=new Promise((function(e,a){n=s[t]=[e,a]}));e.push(n[2]=a);var r,c=document.createElement("script");c.charset="utf-8",c.timeout=120,o.nc&&c.setAttribute("nonce",o.nc),c.src=i(t);var l=new Error;r=function(e){c.onerror=c.onload=null,clearTimeout(u);var n=s[t];if(0!==n){if(n){var a=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+a+": "+r+")",l.name="ChunkLoadError",l.type=a,l.request=r,n[1](l)}s[t]=void 0}};var u=setTimeout((function(){r({type:"timeout",target:c})}),12e4);c.onerror=c.onload=r,document.head.appendChild(c)}return Promise.all(e)},o.m=t,o.c=a,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/",o.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var h=l;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0aa3":function(t,e,n){"use strict";var a=n("26cf"),s=n.n(a);s.a},"0f29":function(t,e,n){},"0fd9":function(t,e,n){"use strict";var a=n("896c"),s=n.n(a);s.a},1:function(t,e){},1477:function(t,e,n){},2395:function(t,e,n){},2423:function(t,e,n){"use strict";n.d(e,"j",(function(){return s})),n.d(e,"e",(function(){return r})),n.d(e,"f",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"c",(function(){return c})),n.d(e,"b",(function(){return l})),n.d(e,"d",(function(){return u})),n.d(e,"g",(function(){return h})),n.d(e,"h",(function(){return f})),n.d(e,"i",(function(){return d}));var a=n("b775"),s=function(t,e){return Object(a["a"])({params:e,method:"GET",url:"/app/v1_0/users/".concat(t,"/articles")})},r=function(t){return Object(a["a"])({params:t,method:"GET",url:"/app/v1_1/articles"})},i=function(t){return Object(a["a"])({method:"GET",url:"/app/v1_0/articles/".concat(t)})},o=function(t){return Object(a["a"])({method:"POST",url:"/app/v1_0/article/collections",data:{target:t}})},c=function(t){return Object(a["a"])({method:"DELETE",url:"/app/v1_0/article/collections/".concat(t)})},l=function(t){return Object(a["a"])({method:"POST",url:"/app/v1_0/article/likings",data:{target:t}})},u=function(t){return Object(a["a"])({method:"DELETE",url:"/app/v1_0/article/likings/".concat(t)})},h=function(t){return Object(a["a"])({method:"GET",url:"/app/v1_0/user/articles",params:t})},f=function(t){return Object(a["a"])({method:"GET",url:"/app/v1_0/article/collections",params:t})},d=function(t){return Object(a["a"])({method:"GET",url:"/app/v1_0/user/histories",params:t})}},"26cf":function(t,e,n){},"2f07":function(t,e,n){},"35d9":function(t,e,n){},3998:function(t,e,n){},4360:function(t,e,n){"use strict";n("caad"),n("c975"),n("a434"),n("2532");var a=n("2b0e"),s=n("2f62"),r=n("5d2d"),i=n("04e1"),o=n.n(i);a["a"].use(s["a"]);var c="user";e["a"]=new s["a"].Store({state:{user:Object(r["a"])(c),cachePages:["TabBar"]},mutations:{setUser:function(t,e){e&&e.token&&(e.id=o()(e.token).user_id),t.user=e,Object(r["b"])(c,t.user)},addCachePage:function(t,e){t.cachePages.includes(e)||t.cachePages.push(e)},removeCachePage:function(t,e){var n=t.cachePages.indexOf(e);-1!==n&&t.cachePages.splice(n)}},actions:{},modules:{}})},4678:function(t,e,n){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function s(t){var e=r(t);return n(e)}function r(t){if(!n.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}s.keys=function(){return Object.keys(a)},s.resolve=r,t.exports=s,s.id="4678"},5639:function(t,e,n){"use strict";var a=n("3998"),s=n.n(a);s.a},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("keep-alive",{attrs:{include:t.$store.state.cachePages}},[n("router-view")],1)],1)},r=[],i={name:"App",data:function(){return{cachePages:["TabBar"]}}},o=i,c=(n("7c55"),n("2877")),l=Object(c["a"])(o,s,r,!1,null,null,null),u=l.exports,h=n("a18c"),f=n("4360"),d=(n("a4d3"),n("4de4"),n("e439"),n("dbb4"),n("b64b"),n("159b"),n("ade3")),p=n("7bb1"),m=n("4c93"),v=n("1cd5");function b(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?b(Object(n),!0).forEach((function(e){Object(d["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}a["a"].component("ValidationProvider",p["b"]),a["a"].component("ValidationObserver",p["a"]),Object.keys(m).forEach((function(t){Object(p["c"])(t,g({},m[t],{message:v["a"][t]}))})),Object(p["c"])("mobile",{validate:function(t){return/^1(3|5|6|7|8|9)\d{9}$/.test(t)},message:"手机号码格式错误"}),Object(p["c"])("code",{validate:function(t){return/^\d{6}$/.test(t)},message:"验证码格式错误"});n("5cfb"),n("66b9");var w=n("b650"),j=(n("e17f"),n("2241")),k=(n("2994"),n("2bdd")),y=(n("4056"),n("44bf")),O=(n("c3a6"),n("ad06")),C=(n("5246"),n("6b41")),x=(n("be7f"),n("565f")),_=(n("414a"),n("7a82")),S=(n("e7e5"),n("d399")),A=(n("ab71"),n("58e6")),P=(n("8a58"),n("e41f")),E=(n("5852"),n("d961")),R=(n("ac1e"),n("543e")),D=(n("2cbd"),n("ab2c")),I=(n("d1cf"),n("ee83")),z=(n("4662"),n("28a2")),L=(n("4d48"),n("d1e1")),U=(n("81e6"),n("9ffb")),T=(n("c194"),n("7744")),$=(n("0653"),n("34e9")),B=(n("537a"),n("ac28")),M=(n("a52c"),n("2ed4")),F=(n("3df5"),n("2830")),G=(n("0ec5"),n("21ab")),Z=(n("da3c"),n("0b33")),H=(n("bda7"),n("5e46"));a["a"].use(w["a"]).use(j["a"]).use(k["a"]).use(y["a"]).use(O["a"]).use(C["a"]).use(x["a"]).use(_["a"]).use(S["a"]).use(A["a"]).use(P["a"]).use(E["a"]).use(R["a"]).use(D["a"]).use(I["a"]).use(z["a"]).use(L["a"]).use(U["a"]).use(T["a"]).use($["a"]).use(B["a"]).use(M["a"]).use(F["a"]).use(G["a"]).use(Z["a"]).use(H["a"]);n("a4b1");var q=n("c1df"),N=n.n(q);N.a.locale("zh-cn"),a["a"].filter("relativeTime",(function(t){return N()(t).startOf("second").fromNow()})),a["a"].config.productionTip=!1,new a["a"]({render:function(t){return t(u)},router:h["a"],store:f["a"]}).$mount("#app")},5838:function(t,e,n){"use strict";var a=n("0f29"),s=n.n(a);s.a},"58f3":function(t,e,n){},"5d2d":function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return r}));var a=n("53ca"),s=function(t){var e=window.localStorage.getItem(t);try{return JSON.parse(e)}catch(n){return console.log("转换失败",n),e}},r=function(t,e){var n="object"===Object(a["a"])(e)?JSON.stringify(e):e;return window.localStorage.setItem(t,n)}},6552:function(t,e,n){},6693:function(t,e,n){"use strict";var a=n("35d9"),s=n.n(a);s.a},7071:function(t,e){t.exports="data:image/png;base64,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"},"762d":function(t,e,n){"use strict";var a=n("a579"),s=n.n(a);s.a},"7c55":function(t,e,n){"use strict";var a=n("2395"),s=n.n(a);s.a},"896c":function(t,e,n){},"8cf7":function(t,e,n){"use strict";var a=n("6552"),s=n.n(a);s.a},9408:function(t,e,n){"use strict";var a=n("b3f5"),s=n.n(a);s.a},a18c:function(t,e,n){"use strict";var a=n("2b0e"),s=n("8c4f"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("van-row",{staticClass:"login-container"},[n("van-nav-bar",{attrs:{title:"登录"}}),n("ValidationObserver",{ref:"myForm"},[n("ValidationProvider",{attrs:{immediate:"",name:"手机号",rules:"required|mobile"}},[n("van-field",{attrs:{placeholder:"请输入手机号"},model:{value:t.userInfo.mobile,callback:function(e){t.$set(t.userInfo,"mobile",e)},expression:"userInfo.mobile"}},[n("van-icon",{attrs:{slot:"left-icon","class-prefix":"icon",name:"yidongmobile216"},slot:"left-icon"})],1)],1),n("ValidationProvider",{attrs:{immediate:"",name:"验证码",rules:"required|code"}},[n("van-field",{staticClass:"verification-code",attrs:{placeholder:"请输入验证码"},model:{value:t.userInfo.code,callback:function(e){t.$set(t.userInfo,"code",e)},expression:"userInfo.code"}},[n("van-icon",{attrs:{slot:"left-icon","class-prefix":"icon",name:"icon--"},slot:"left-icon"}),t.isCountDownShow?n("van-count-down",{attrs:{slot:"button",format:"ss s",time:6e4},on:{finish:function(e){t.isCountDownShow=!1}},slot:"button"}):n("van-button",{attrs:{slot:"button",round:"",size:"small",type:"primary"},on:{click:t.sendSmsCode},slot:"button"},[t._v(" 获取验证码 ")])],1)],1)],1),n("van-row",{staticClass:"loginBtn"},[n("van-button",{attrs:{type:"info"},on:{click:t.userLogin}},[t._v("登录")])],1)],1)},i=[],o=(n("d3b7"),n("ac1f"),n("5319"),n("ddb0"),n("96cf"),n("1da1")),c=n("b775"),l=function(t){return Object(c["a"])({url:"/app/v1_0/authorizations",method:"POST",data:t})},u=function(t){return Object(c["a"])({method:"GET",url:"/app/v1_0/sms/codes/".concat(t)})},h=function(){return Object(c["a"])({method:"GET",url:"/app/v1_0/user"})},f=function(t){return Object(c["a"])({method:"GET",url:"/app/v1_0/users/".concat(t)})},d=function(t){return Object(c["a"])({method:"POST",url:"/app/v1_0/user/followings",data:{target:t}})},p=function(t){return Object(c["a"])({method:"DELETE",url:"/app/v1_0/user/followings/".concat(t)})},m=function(){return Object(c["a"])({method:"GET",url:"/app/v1_0/user/profile"})},v=function(t){return Object(c["a"])({method:"PATCH",url:"/app/v1_0/user/photo",data:t})},b=function(t){return Object(c["a"])({method:"PATCH",url:"/app/v1_0/user/profile",data:t})},g=n("7bb1"),w={name:"LoginPage",data:function(){return{isCountDownShow:!1,userInfo:{mobile:"",code:""}}},methods:{sendSmsCode:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.userInfo.mobile,t.next=3,Object(g["d"])(e,"required|mobile",{name:"手机号"});case 3:if(n=t.sent,n.valid){t.next=7;break}return this.$toast(n.errors[0]),t.abrupt("return");case 7:return t.prev=7,t.next=10,u(e);case 10:this.isCountDownShow=!0,t.next=20;break;case 13:if(t.prev=13,t.t0=t["catch"](7),429!==t.t0.response.status){t.next=18;break}return this.$toast.fail("请勿重复操作"),t.abrupt("return");case 18:this.$toast.fail("发送失败"),this.isCountDownShow=!1;case 20:case"end":return t.stop()}}),t,this,[[7,13]])})));function e(){return t.apply(this,arguments)}return e}(),userLogin:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,n,a,s,r,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.userInfo,t.next=3,this.$refs.myForm.validate();case 3:if(n=t.sent,n){t.next=16;break}a=this.$refs.myForm.errors,t.t0=regeneratorRuntime.keys(a);case 7:if((t.t1=t.t0()).done){t.next=15;break}if(s=t.t1.value,r=a[s],!r[0]){t.next=13;break}return this.$toast(r[0]),t.abrupt("return");case 13:t.next=7;break;case 15:return t.abrupt("return");case 16:return this.$toast.loading({duration:0,forbidClick:!0,message:"登陆中..."}),t.prev=17,t.next=20,l(e);case 20:i=t.sent,this.$store.commit("setUser",i.data.data),this.$toast.success("登录成功"),o=this.$route.query.redirect||"/",this.$router.replace(o),t.next=30;break;case 27:t.prev=27,t.t2=t["catch"](17),this.$toast.fail("登录失败,手机号或验证码不对");case 30:case"end":return t.stop()}}),t,this,[[17,27]])})));function e(){return t.apply(this,arguments)}return e}()}},j=w,k=(n("8cf7"),n("2877")),y=Object(k["a"])(j,r,i,!1,null,"d12b8e36",null),O=y.exports,C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"user-profile"},[n("van-nav-bar",{attrs:{title:"个人信息"}},[n("van-icon",{attrs:{slot:"left",name:"arrow-left"},on:{click:function(e){return t.$router.back()}},slot:"left"})],1),n("van-cell-group",[n("van-cell",{attrs:{title:"头像","is-link":""}},[n("van-image",{staticClass:"avatar",attrs:{src:t.UserProfile.photo,round:"",fit:"cover"},on:{click:t.onSelectFile}}),n("input",{ref:"file",attrs:{hidden:"",type:"file"},on:{change:t.onFileChange}})],1),n("van-cell",{attrs:{value:t.UserProfile.name,title:"昵称","is-link":""},on:{click:function(e){t.isEditNameShow=!0}}}),n("van-cell",{attrs:{value:0===t.UserProfile.gender?"男":"女",title:"性别","is-link":""},on:{click:function(e){t.isEditGenderShow=!0}}}),n("van-cell",{attrs:{value:t.UserProfile.birthday,title:"生日","is-link":""},on:{click:function(e){t.isEditBirthdayShow=!0}}})],1),n("van-image-preview",{attrs:{images:t.images},on:{close:function(e){t.$refs.file.value=""}},model:{value:t.isPreviewShow,callback:function(e){t.isPreviewShow=e},expression:"isPreviewShow"}}),n("van-popup",{style:{height:"22%"},attrs:{position:"bottom"},model:{value:t.isEditNameShow,callback:function(e){t.isEditNameShow=e},expression:"isEditNameShow"}},[n("van-nav-bar",{attrs:{title:"昵称","left-text":"取消","right-text":"完成"},on:{"click-left":function(e){t.isEditNameShow=!1},"click-right":t.onUpdateName}}),n("van-field",{attrs:{value:t.UserProfile.name,rows:"2",autosize:"",type:"textarea",maxlength:"20",placeholder:"请输入昵称","show-word-limit":""},on:{input:function(e){t.inputName=e}}})],1),n("van-action-sheet",{attrs:{actions:t.actions,"cancel-text":"取消"},on:{select:t.onGenderSelect,cancel:function(e){t.isEditGenderShow=!1}},model:{value:t.isEditGenderShow,callback:function(e){t.isEditGenderShow=e},expression:"isEditGenderShow"}}),n("van-popup",{attrs:{position:"bottom"},model:{value:t.isEditBirthdayShow,callback:function(e){t.isEditBirthdayShow=e},expression:"isEditBirthdayShow"}},[n("van-datetime-picker",{attrs:{value:t.currentDate,type:"date","min-date":t.minDate,"max-date":t.maxDate},on:{confirm:t.onUpdateBirthday,cancel:function(e){t.isEditBirthdayShow=!1}}})],1)],1)},x=[],_=(n("b0c0"),n("3ca3"),n("2b3d"),n("4662"),n("28a2")),S=n("ade3"),A=n("c1df"),P=n.n(A),E={name:"UserProfile",data:function(){return{UserProfile:{},images:[],isPreviewShow:!1,isEditNameShow:!1,inputName:"",isEditGenderShow:!1,isEditBirthdayShow:!1,actions:[{name:"男",value:0},{name:"女",value:1}],minDate:new Date(1970,1,1),maxDate:new Date}},methods:{onUpdateBirthday:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=P()(e).format("YYYY-MM-DD"),t.next=3,this.updateUserProfile("birthday",n);case 3:this.UserProfile.birthday=n,this.isEditBirthdayShow=!1;case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),onGenderSelect:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.updateUserProfile("gender",e.value);case 2:this.UserProfile.gender=e.value,this.isEditGenderShow=!1;case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),onUpdateName:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.updateUserProfile("name",this.inputName);case 2:this.UserProfile.name=this.inputName,this.isEditNameShow=!1;case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),updateUserProfile:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.$toast.loading({duration:0,message:"保存中...",forbidClick:!0}),t.prev=1,t.next=4,b(Object(S["a"])({},e,n));case 4:this.$toast.success("修改成功"),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](1),this.$toast.fail("修改失败");case 10:case"end":return t.stop()}}),t,this,[[1,7]])})));function e(e,n){return t.apply(this,arguments)}return e}(),onFileChange:function(){var t=URL.createObjectURL(this.file.files[0]);this.images=[t],this.isPreviewShow=!0,Object(_["a"])({images:[t],onClose:this.updateAvatar})},updateAvatar:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,n,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$dialog.confirm({title:"头像选择",message:"是否使用该图片作为头像"});case 3:return this.$toast.loading({duration:0,message:"保存中...",forbidClick:!0}),e=this.file.files[0],n=new FormData,n.append("photo",e),t.next=9,v(n);case 9:a=t.sent,s=a.data,this.UserProfile.photo=s.data.photo,this.isPreviewShow=!1,this.$toast.success("上传成功"),t.next=20;break;case 16:t.prev=16,t.t0=t["catch"](0),this.isPreviewShow=!1,this.$toast.fail("上传失败");case 20:case"end":return t.stop()}}),t,this,[[0,16]])})));function e(){return t.apply(this,arguments)}return e}(),onSelectFile:function(){this.file.click()},loadUserProfile:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m();case 3:e=t.sent,n=e.data,this.UserProfile=n.data,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),this.$toast.fail("加载数据失败");case 11:case"end":return t.stop()}}),t,this,[[0,8]])})));function e(){return t.apply(this,arguments)}return e}()},computed:{file:function(){return this.$refs["file"]},currentDate:function(){return new Date(this.UserProfile.birthday)}},created:function(){this.loadUserProfile()}},R=E,D=(n("ae1a"),Object(k["a"])(R,C,x,!1,null,"1b98a669",null)),I=D.exports,z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"chat-container"},[n("van-nav-bar",{attrs:{fixed:"",title:"小智同学","left-arrow":""},on:{"click-left":function(e){return t.$router.back()}}}),n("van-row",{ref:"messageList",staticClass:"message-list"},t._l(t.messages,(function(e,a){return n("div",{key:a,staticClass:"message-item",class:{reverse:e.isMe}},[n("van-image",{staticClass:"avatar",attrs:{slot:"icon",round:"",src:"https://img.yzcdn.cn/vant/cat.jpeg"},slot:"icon"}),n("van-row",{staticClass:"title"},[n("span",[t._v(t._s(e.msg))])])],1)})),0),n("van-cell-group",{staticClass:"send-message"},[n("van-field",{attrs:{center:"",clearable:""},model:{value:t.message,callback:function(e){t.message="string"===typeof e?e.trim():e},expression:"message"}},[n("van-button",{attrs:{slot:"button",size:"small",type:"primary"},on:{click:t.onSendMessage},slot:"button"},[t._v("发送")])],1)],1)],1)},L=[],U=n("8055"),T=n.n(U),$=n("5d2d"),B={name:"UserChat",data:function(){return{message:"",socket:null,messages:Object($["a"])("chat-messages")||[]}},methods:{onSendMessage:function(){var t=this.message;if(t.length){var e={msg:t,timestamp:Date.now(),isMe:!0};this.socket.emit("message",e),this.messages.push(e),this.message=""}},toBottom:function(){var t=this.$refs.messageList.$el;t.scrollTop=t.scrollHeight}},watch:{messages:function(t){var e=this;Object($["b"])("chat-messages",t),this.$nextTick((function(){e.toBottom()}))}},created:function(){var t=this,e=T()("http://ttapi.research.itcast.cn");this.socket=e,e.on("connect",(function(){console.log("建立连接成功")})),e.on("message",(function(e){t.messages.push(e)}))}},M=B,F=(n("bbc4"),Object(k["a"])(M,z,L,!1,null,"26585fd8",null)),G=F.exports,Z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"user-articles"},[n("van-nav-bar",{attrs:{fixed:"",title:"收藏/历史/作品","left-arrow":""},on:{"click-left":function(e){return t.$router.replace("/my")}}}),n("van-tabs",{model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[n("van-tab",{attrs:{title:"收藏"}},[n("collect-article")],1),n("van-tab",{attrs:{title:"历史"}},[n("history-article")],1),n("van-tab",{attrs:{title:"作品"}},[n("user-article")],1)],1),n(t.currentTabComponent,{tag:"component"})],1)},H=[],q=(n("c975"),{name:"UserArticles",components:{UserArticle:function(){return n.e("chunk-2d0d5f6f").then(n.bind(null,"7110"))},CollectArticle:function(){return n.e("chunk-2d0b9f65").then(n.bind(null,"34d2"))},HistoryArticle:function(){return n.e("chunk-2d2268ce").then(n.bind(null,"e8af"))}},props:{type:{type:String}},data:function(){var t=["collect","history"].indexOf(this.type);return-1===t&&(t=2),{active:t}},computed:{currentTabComponent:function(){return["CollectArticle","HistoryArticle","UserArticle"][this.active]}},beforeRouteLeave:function(t,e,n){"article"===t.name?this.$store.commit("addCachePage","UserArticles"):this.$store.commit("removeCachePage","UserArticles"),n()},activated:function(){console.log("activated")},deactivated:function(){console.log("deactivated")}}),N=q,Y=(n("0aa3"),Object(k["a"])(N,Z,H,!1,null,"41728865",null)),V=Y.exports,J=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"user-container"},[n("van-nav-bar",{attrs:{title:t.userInfo.name,"left-arrow":"",fixed:""},on:{"click-left":function(e){return t.$router.back()}}}),n("van-row",{staticClass:"user-info-container"},[n("van-col",{staticClass:"user-info"},[n("van-image",{ref:"image",staticClass:"user-infoImage",attrs:{src:t.userInfo.photo,round:"",fit:"fill"},on:{click:t.imagePreview}}),n("van-row",{staticClass:"user-info-row"},[n("van-col",{staticClass:"user-info-col"},[n("van-row",{staticClass:"item"},[n("van-col",{staticClass:"count"},[t._v(t._s(t.userInfo.art_count))]),n("van-col",{staticClass:"text"},[t._v("发布")])],1),n("van-row",{staticClass:"item"},[n("van-col",{staticClass:"count"},[t._v(t._s(t.userInfo.follow_count))]),n("van-col",{staticClass:"text"},[t._v("关注")])],1),n("van-row",{staticClass:"item"},[n("van-col",{staticClass:"count"},[t._v(t._s(t.userInfo.fans_count))]),n("van-col",{staticClass:"text"},[t._v("粉丝")])],1),n("van-row",{staticClass:"item"},[n("van-col",{staticClass:"count"},[t._v(t._s(t.userInfo.like_count))]),n("van-col",{staticClass:"text"},[t._v("获赞")])],1)],1),n("div",{staticClass:"action"},[n("van-button",{attrs:{type:"primary",size:"small"}},[t._v("私信")]),n("van-button",{attrs:{type:"info",size:"small",icon:"plus"}},[t._v("关注")])],1)],1)],1),n("van-row",{staticClass:"user-intro"},[n("van-col",[n("span",[t._v("认证:")]),n("span",[t._v(t._s(t.userInfo.certi))])]),n("van-col",{staticClass:"user-intro-item"},[n("span",[t._v("简介:")]),n("span",[t._v(t._s(t.userInfo.intro))])])],1)],1),n("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了","loading-text":"加载中..."},on:{load:t.onLoadUser},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(e,a){return n("van-cell",{key:a,attrs:{title:e.title},on:{click:function(n){return t.$router.push("/article/"+e.art_id)}}})})),1)],1)},K=[],Q=n("2909"),X=n("2423"),W={name:"UserPage",data:function(){return{list:[],page:1,loading:!1,finished:!1,userInfo:{}}},methods:{imagePreview:function(){var t=this.userInfo.photo;Object(_["a"])({images:[t]})},loadUserInfo:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f(this.$route.params.userId);case 3:e=t.sent,n=e.data,this.userInfo=n.data,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),this.$toast.fail("加载数据失败");case 11:case"end":return t.stop()}}),t,this,[[0,8]])})));function e(){return t.apply(this,arguments)}return e}(),onLoadUser:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,n,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(X["j"])(this.$route.params.userId,{page:this.page,per_page:20});case 2:n=t.sent,a=n.data,s=a.data.results,(e=this.list).push.apply(e,Object(Q["a"])(s)),this.loading=!1,s.length?this.page++:this.finished=!0;case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},created:function(){this.loadUserInfo()}},tt=W,et=(n("6693"),Object(k["a"])(tt,J,K,!1,null,"959af566",null)),nt=et.exports,at=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"search-container"},[n("form",{staticClass:"search-content",attrs:{action:"/"}},[n("van-search",{attrs:{placeholder:"请输入搜索关键词","show-action":"",background:"#3296fa"},on:{cancel:function(e){return t.$router.back()},focus:function(e){t.isSearchResultShow=!1},search:function(e){return t.onSearch(t.searchContent)},input:t.onSearchInput},model:{value:t.searchContent,callback:function(e){t.searchContent=e},expression:"searchContent"}})],1),t.isSearchResultShow?n("search-result",{staticClass:"search-result",attrs:{searchContent:t.searchContent}}):t.searchContent?n("van-cell-group",{staticClass:"search-suggestions"},t._l(t.searchSuggestions,(function(e,a){return n("van-cell",{key:a,attrs:{icon:"search"},on:{click:function(n){return t.onSearch(e)}}},[n("div",{attrs:{slot:"title"},domProps:{innerHTML:t._s(t.highlight(e))},slot:"title"})])})),1):n("van-cell-group",{staticClass:"search-histories"},[n("van-cell",{attrs:{center:"",title:"历史记录"}},[t.isDeleteShow?[n("span",{on:{click:function(e){t.searchHistories=[]}}},[t._v("全部删除")]),n("span",{on:{click:function(e){t.isDeleteShow=!1}}},[t._v(" 完成")])]:n("van-icon",{attrs:{slot:"right-icon",name:"delete",color:"#969799"},on:{click:function(e){t.isDeleteShow=!0}},slot:"right-icon"})],2),t._l(t.searchHistories,(function(e,a){return n("van-cell",{key:a,attrs:{title:e},on:{click:function(n){return t.onHistoriesClick(e,a)}}},[n("van-icon",{directives:[{name:"show",rawName:"v-show",value:t.isDeleteShow,expression:"isDeleteShow"}],attrs:{slot:"right-icon",name:"close",color:"#969799"},slot:"right-icon"})],1)}))],2)],1)},st=[],rt=(n("a434"),n("4d63"),n("25f0"),n("2ef0")),it=function(t){return Object(c["a"])({method:"GET",url:"/app/v1_0/suggestion",params:{q:t}})},ot=function(t){return Object(c["a"])({method:"GET",url:"/app/v1_0/search",params:t})},ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"search-result"},[n("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onloadSearchResult},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.searchResult,(function(e,a){return n("van-cell",{key:a,attrs:{title:e.title},on:{click:function(n){return t.$router.push("/article/"+e.art_id)}}})})),1)],1)},lt=[],ut={name:"SearchResult",props:{searchContent:{type:String,required:!0}},data:function(){return{searchResult:[],loading:!1,finished:!1,page:1,per_page:null}},methods:{onloadSearchResult:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,n,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ot({page:this.page,per_page:this.per_page,q:this.searchContent});case 2:n=t.sent,a=n.data,s=a.data.results,(e=this.searchResult).push.apply(e,Object(Q["a"])(s)),this.loading=!1,s.length?this.page++:this.finished=!0;case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},ht=ut,ft=Object(k["a"])(ht,ct,lt,!1,null,null,null),dt=ft.exports,pt={name:"SearchPage",components:{searchResult:dt},data:function(){return{searchContent:"",searchHistories:Object($["a"])("search-histories")||[],searchSuggestions:[],isSearchResultShow:!1,isDeleteShow:!1}},watch:{searchHistories:function(t){Object($["b"])("search-histories",t)}},methods:{onHistoriesClick:function(t,e){this.isDeleteShow?this.searchHistories.splice(e,1):this.onSearch(t)},onSearch:function(t){this.searchContent=t;var e=this.searchHistories,n=e.indexOf(t);-1!==n&&e.splice(n),this.searchHistories.unshift(t),this.isSearchResultShow=!0},highlight:function(t){var e=this.searchContent,n=RegExp(e,"gi");return t.replace(n,'<span style="color:red">'.concat(e,"</span>"))},onSearchInput:Object(rt["debounce"])(Object(o["a"])(regeneratorRuntime.mark((function t(){var e,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.searchContent,e){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,it(e);case 5:n=t.sent,a=n.data,this.searchSuggestions=a.data.options;case 8:case"end":return t.stop()}}),t,this)}))),200)}},mt=pt,vt=(n("e08b"),Object(k["a"])(mt,at,st,!1,null,"81ca75d0",null)),bt=vt.exports,gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"article-container"},[a("van-nav-bar",{attrs:{title:"文章详情","left-arrow":"",fixed:""},on:{"click-left":function(e){return t.$router.back()}}}),a("van-row",{staticClass:"article-box"},[t.loading?a("van-loading",{staticClass:"article-loading",attrs:{color:"#1989fa",vertical:""}},[t._t("default",[t._v("加载中...")])],2):t.ArticleDetails.title?a("van-row",{staticClass:"article-details"},[a("h3",{staticClass:"article-title"},[t._v(t._s(t.ArticleDetails.title))]),a("van-row",{staticClass:"article-author",attrs:{type:"flex",justify:"space-between",align:"center"}},[a("van-col",{staticClass:"author-info"},[a("van-image",{staticClass:"avatar",attrs:{src:t.ArticleDetails.aut_photo,round:"",fit:"cover"}}),a("van-row",{staticClass:"info-text"},[a("van-col",{staticClass:"info-name"},[t._v(t._s(t.ArticleDetails.aut_name))]),a("van-col",{staticClass:"info-time"},[t._v(t._s(t._f("relativeTime")(t.ArticleDetails.pubdate)))])],1)],1),t.user&&t.ArticleDetails.aut_id===t.$store.state.user.id?t._e():a("van-button",{staticClass:"follow-btn",attrs:{loading:t.isFollowLoadingShow,"loading-type":"spinner",type:t.ArticleDetails.is_followed?"default":"info",icon:t.ArticleDetails.is_followed?"":"plus",round:"",size:"mini"},on:{click:t.clickFollowOrCancel}},[t._v(t._s(t.ArticleDetails.is_followed?"已关注":"关注")+" ")])],1),a("Van-row",{staticClass:"markdown-body",domProps:{innerHTML:t._s(t.ArticleDetails.content)}}),a("van-cell",{staticClass:"comment-list-title",attrs:{title:"全部评论"}}),a("article-comment",{ref:"article-comment",attrs:{"article-id":t.articleId},on:{"click-reply":t.onClickReplyComment}})],1):a("van-row",{staticClass:"article-error"},[a("img",{attrs:{src:n("7071"),alt:"no-network"}}),a("p",{staticClass:"error-text"},[t._v("网络不给力哦")]),a("van-button",{staticClass:"error-btn",attrs:{round:"",type:"default",size:"small",color:"#ccc"},on:{click:t.loadArticleDetails}},[t._v("点击重试 ")])],1)],1),a("van-row",{staticClass:"article-footer"},[a("van-button",{staticClass:"write-btn",attrs:{type:"default",round:"",size:"small"},on:{click:function(e){t.isPostCommentShow=!0}}},[t._v("写评论")]),a("van-icon",{staticClass:"comment-icon",attrs:{name:"comment-o",info:t.totalCount}}),a("van-icon",{attrs:{name:t.ArticleDetails.is_collected?"star":"star-o",color:"orange"},on:{click:t.clickCollectOrCancel}}),a("van-icon",{attrs:{name:1===t.ArticleDetails.attitude?"good-job":"good-job-o",color:"#e5645f"},on:{click:t.clickLikeOrCancel}}),a("van-icon",{staticClass:"share-icon",attrs:{name:"share"},on:{click:t.onShare}})],1),a("van-popup",{style:{height:"18%"},attrs:{position:"bottom"},model:{value:t.isPostCommentShow,callback:function(e){t.isPostCommentShow=e},expression:"isPostCommentShow"}},[a("post-comment",{on:{"click-post":t.onPostComment},model:{value:t.postMessage,callback:function(e){t.postMessage=e},expression:"postMessage"}})],1),a("van-popup",{style:{height:"90%"},attrs:{position:"bottom"},model:{value:t.isReplyShow,callback:function(e){t.isReplyShow=e},expression:"isReplyShow"}},[t.isReplyShow?a("comment-reply",{attrs:{"article-id":t.articleId,comment:t.currentComment},on:{"click-close":function(e){t.isReplyShow=!1}}}):t._e()],1)],1)},wt=[],jt=(n("a4d3"),n("4de4"),n("e439"),n("dbb4"),n("b64b"),n("159b"),n("2f62")),kt=function(t){return Object(c["a"])({method:"GET",url:"/app/v1_0/comments",params:t})},yt=function(t){return Object(c["a"])({method:"POST",url:"/app/v1_0/comments",data:t})},Ot=function(t){return Object(c["a"])({method:"POST",url:"/app/v1_0/comment/likings",data:{target:t}})},Ct=function(t){return Object(c["a"])({method:"DELETE",url:"/app/v1_0/comment/likings/".concat(t)})},xt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"article-comment"},[n("van-list",{attrs:{finished:t.finished,"finished-text":"已展示所有评论"},on:{load:t.onLoadArticleComments},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(e,a){return n("comment-item",{key:a,attrs:{comment:e},on:{"click-reply":function(e){return t.$emit("click-reply",e)}}})})),1)],1)},_t=[],St=(n("a9e3"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("van-cell",{staticClass:"comment-item"},[n("van-image",{staticClass:"avatar",attrs:{slot:"icon",src:t.comment.aut_photo,round:"",fit:"cover"},slot:"icon"}),n("span",{staticStyle:{color:"#466b9d"},attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.comment.aut_name))]),n("van-row",{staticClass:"info",attrs:{slot:"label"},slot:"label"},[n("span",{staticClass:"content",staticStyle:{color:"#363636"}},[t._v(t._s(t.comment.content))]),n("van-col",[n("span",{staticClass:"date"},[t._v(t._s(t._f("relativeTime")(t.comment.pubdate)))]),n("van-button",{attrs:{type:"default",size:"mini"},on:{click:function(e){return t.$emit("click-reply",t.comment)}}},[t._v(" 回复 "+t._s(t.comment.reply_count)+" ")])],1)],1),n("van-row",{staticClass:"like-container",attrs:{slot:"right-icon"},slot:"right-icon"},[n("van-icon",{attrs:{name:t.comment.is_liking?"good-job":"good-job-o",color:t.comment.is_liking?"#e5645f":""},on:{click:t.onLikeOrCancel}}),n("span",[t._v(t._s(t.comment.like_count?t.comment.like_count:"赞"))])],1)],1)}),At=[],Pt={name:"CommentItem",props:{comment:{type:Object,required:!0}},data:function(){return{}},methods:{onLikeOrCancel:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.$toast.loading({duration:0,message:"加载中...",forbidClick:!0}),t.prev=1,e=this.comment.com_id.toString(),!this.comment.is_liking){t.next=10;break}return t.next=6,Ct(e);case 6:this.comment.like_count--,this.$toast.success("取消点赞"),t.next=14;break;case 10:return t.next=12,Ot(e);case 12:this.comment.like_count++,this.$toast.success("点赞成功");case 14:this.comment.is_liking=!this.comment.is_liking,t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](1),this.$toast.fail("操作失败");case 20:case"end":return t.stop()}}),t,this,[[1,17]])})));function e(){return t.apply(this,arguments)}return e}()}},Et=Pt,Rt=(n("beb8"),Object(k["a"])(Et,St,At,!1,null,"3f6afe22",null)),Dt=Rt.exports,It={name:"ArticleComment",components:{commentItem:Dt},props:{articleId:{type:[Number,String,Object],required:!0}},data:function(){return{list:[],loading:!1,finished:!1,offset:null,limit:20}},methods:{onLoadArticleComments:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,n,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,kt({type:"a",source:this.articleId,offset:this.offset,limit:this.limit});case 2:n=t.sent,a=n.data,s=a.data.results,(e=this.list).push.apply(e,Object(Q["a"])(s)),this.loading=!1,s.length?this.offset=a.data.last_id:this.finished=!0;case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},zt=It,Lt=Object(k["a"])(zt,xt,_t,!1,null,null,null),Ut=Lt.exports,Tt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"post-comment"},[n("van-field",{staticClass:"post-field",attrs:{value:t.value,autosize:"",type:"textarea",maxlength:"50","show-word-limit":"",placeholder:"优质评论将会被优先展示"},on:{input:function(e){return t.$emit("input",e)}}}),n("van-button",{staticClass:"post-btn",attrs:{size:"small"},on:{click:function(e){return t.$emit("click-post")}}},[t._v("发布")])],1)},$t=[],Bt={name:"PostComment",props:{value:{type:String,required:!0}}},Mt=Bt,Ft=(n("762d"),Object(k["a"])(Mt,Tt,$t,!1,null,"0ac8f8b8",null)),Gt=Ft.exports,Zt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"comment-reply"},[n("van-nav-bar",{attrs:{title:t.comment.reply_count+"条回复"}},[n("van-icon",{attrs:{slot:"left",name:"cross"},on:{click:function(e){return t.$emit("click-close")}},slot:"left"})],1),n("comment-item",{attrs:{comment:t.comment}}),n("van-cell",{attrs:{title:"全部评论"}}),n("van-list",{attrs:{finished:t.finished,"finished-text":"已展示所有评论"},on:{load:t.onLoadComment},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(t,e){return n("comment-item",{key:e,attrs:{comment:t}})})),1),n("van-row",{staticClass:"reply-footer"},[n("van-button",{staticClass:"write-btn",attrs:{type:"default",round:"",size:"small"},on:{click:function(e){t.isPostReplyShow=!0}}},[t._v("写评论")]),n("van-icon",{attrs:{name:"good-job",color:"#e5645f"}})],1),n("van-popup",{style:{height:"18%"},attrs:{position:"bottom"},model:{value:t.isPostReplyShow,callback:function(e){t.isPostReplyShow=e},expression:"isPostReplyShow"}},[n("post-comment",{on:{"click-post":t.onPostReplyComment},model:{value:t.postMessage,callback:function(e){t.postMessage=e},expression:"postMessage"}})],1)],1)},Ht=[],qt={name:"CommentReply",components:{commentItem:Dt,postComment:Gt},props:{comment:{type:Object,required:!0},articleId:{type:[Number,String,Object],required:!0}},data:function(){return{list:[],loading:!1,finished:!1,offset:null,limit:20,isPostReplyShow:!1,postMessage:""}},methods:{onPostReplyComment:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.$toast.loading({duration:0,message:"发布中...",forbidClick:!0}),t.prev=1,t.next=4,yt({target:this.comment.com_id.toString(),content:this.postMessage,art_id:this.articleId});case 4:e=t.sent,n=e.data,this.list.unshift(n.data.new_obj),this.comment.reply_count++,this.$toast.success("发布成功"),this.postMessage="",this.isPostReplyShow=!1,t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](1),this.$toast.fail("发布失败"),this.postMessage="";case 17:case"end":return t.stop()}}),t,this,[[1,13]])})));function e(){return t.apply(this,arguments)}return e}(),onLoadComment:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,n,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,kt({type:"c",source:this.comment.com_id.toString(),offset:this.offset,limit:this.limit});case 2:n=t.sent,a=n.data,s=a.data.results,(e=this.list).push.apply(e,Object(Q["a"])(s)),this.loading=!1,s.length?this.offset=a.data.last_id:this.finished=!0;case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},Nt=qt,Yt=(n("0fd9"),Object(k["a"])(Nt,Zt,Ht,!1,null,"673eac8c",null)),Vt=Yt.exports;function Jt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function Kt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Jt(Object(n),!0).forEach((function(e){Object(S["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Jt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Qt={name:"ArticlePage",inject:["reload"],components:{postComment:Gt,articleComment:Ut,commentReply:Vt},props:{articleId:{type:String,required:!0}},data:function(){return{loading:!0,ArticleDetails:{},isFollowLoadingShow:!1,isPostCommentShow:!1,postMessage:"",isReplyShow:!1,currentComment:{},totalCount:""}},methods:{onShare:function(){window.plus.share.sendWithSystem({content:this.ArticleDetails.title,href:"http://www.mingjue.xyz/#".concat(this.$route.fullPath)},(function(){console.log("分享成功")}),(function(){console.log("分享失败")}))},onClickReplyComment:function(t){this.currentComment=t,this.isReplyShow=!0},onLoadComment:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,kt({type:"a",source:this.articleId,offset:this.offset,limit:this.limit});case 2:e=t.sent,n=e.data,this.totalCount=n.data.total_count,this.isRouterAlive=!1;case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),onPostComment:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.$toast.loading({duration:0,message:"发布中...",forbidClick:!0}),t.prev=1,t.next=4,yt({target:this.articleId,content:this.postMessage});case 4:e=t.sent,n=e.data,this.$refs["article-comment"].list.unshift(n.data.new_obj),this.$toast.success("发布成功"),this.totalCount++,this.postMessage="",this.isPostCommentShow=!1,t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](1),this.$toast.fail("发布失败"),this.postMessage="";case 17:case"end":return t.stop()}}),t,this,[[1,13]])})));function e(){return t.apply(this,arguments)}return e}(),clickFollowOrCancel:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.isFollowLoadingShow=!0,t.prev=1,e=this.ArticleDetails.aut_id,!this.ArticleDetails.is_followed){t.next=8;break}return t.next=6,p(e);case 6:t.next=10;break;case 8:return t.next=10,d(e);case 10:this.ArticleDetails.is_followed=!this.ArticleDetails.is_followed,t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](1),this.$toast.fail("操作失败");case 16:this.isFollowLoadingShow=!1;case 17:case"end":return t.stop()}}),t,this,[[1,13]])})));function e(){return t.apply(this,arguments)}return e}(),clickLikeOrCancel:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.$toast.loading({duration:0,message:"加载中...",forbidClick:!0}),t.prev=1,1!==this.ArticleDetails.attitude){t.next=9;break}return t.next=5,Object(X["d"])(this.articleId);case 5:this.ArticleDetails.attitude=-1,this.$toast.success("取消点赞"),t.next=13;break;case 9:return t.next=11,Object(X["b"])(this.articleId);case 11:this.ArticleDetails.attitude=1,this.$toast.success("点赞成功");case 13:t.next=18;break;case 15:t.prev=15,t.t0=t["catch"](1),this.$toast.fail("操作失败");case 18:case"end":return t.stop()}}),t,this,[[1,15]])})));function e(){return t.apply(this,arguments)}return e}(),clickCollectOrCancel:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.$toast.loading({duration:0,message:"加载中...",forbidClick:!0}),t.prev=1,!this.ArticleDetails.is_collected){t.next=9;break}return t.next=5,Object(X["c"])(this.articleId);case 5:this.ArticleDetails.is_collected=!1,this.$toast.success("取消收藏"),t.next=13;break;case 9:return t.next=11,Object(X["a"])(this.articleId);case 11:this.ArticleDetails.is_collected=!0,this.$toast.success("收藏成功");case 13:t.next=18;break;case 15:t.prev=15,t.t0=t["catch"](1),this.$toast.fail("操作失败");case 18:case"end":return t.stop()}}),t,this,[[1,15]])})));function e(){return t.apply(this,arguments)}return e}(),loadArticleDetails:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,t.prev=1,t.next=4,Object(X["f"])(this.articleId);case 4:e=t.sent,n=e.data,this.ArticleDetails=n.data,t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),this.$toast.fail("加载数据失败");case 12:this.loading=!1;case 13:case"end":return t.stop()}}),t,this,[[1,9]])})));function e(){return t.apply(this,arguments)}return e}()},computed:Kt({},Object(jt["b"])(["user"])),created:function(){this.onLoadComment(),this.loadArticleDetails()}},Xt=Qt,Wt=(n("bdcc"),Object(k["a"])(Xt,gt,wt,!1,null,"89142026",null)),te=Wt.exports,ee=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tab-bar"},[n("keep-alive",[n("router-view")],1),n("van-tabbar",{attrs:{route:""}},[n("van-tabbar-item",{attrs:{to:"/",icon:"home-o"}},[t._v("首页")]),n("van-tabbar-item",{attrs:{to:"/question",icon:"comment-o"}},[t._v("问答")]),n("van-tabbar-item",{attrs:{to:"/video",icon:"video-o"}},[t._v("视频")]),n("van-tabbar-item",{attrs:{to:"/my",icon:"manager-o"}},[t._v(t._s(t.$store.state.user?"我的":"未登录"))])],1)],1)},ne=[],ae={name:"TabBar",data:function(){return{}}},se=ae,re=Object(k["a"])(se,ee,ne,!1,null,null,null),ie=re.exports,oe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home-container"},[n("van-nav-bar",{staticClass:"home-nav-bar",attrs:{fixed:""}},[n("div",{staticClass:"home-logo",attrs:{slot:"left"},slot:"left"}),n("van-button",{staticClass:"search-btn",attrs:{slot:"right",icon:"search"},on:{click:function(e){return t.$router.push("/search")}},slot:"right"},[t._v("搜索")])],1),n("van-tabs",{model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[n("van-icon",{staticClass:"edit-Icon",attrs:{slot:"nav-right",name:"wap-nav"},on:{click:function(e){t.isChannelEditShow=!0}},slot:"nav-right"}),t._l(t.userChannels,(function(t){return n("van-tab",{key:t.id,attrs:{title:t.name}},[n("article-list",{attrs:{channel:t}})],1)}))],2),n("van-popup",{style:{height:"93%"},attrs:{position:"bottom",round:"",closeable:"","close-icon-position":"top-left"},model:{value:t.isChannelEditShow,callback:function(e){t.isChannelEditShow=e},expression:"isChannelEditShow"}},[n("channel-edit",{attrs:{"user-channels":t.userChannels,active:t.active},on:{switch:t.switchChannel}})],1)],1)},ce=[],le=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"article-list"},[n("van-pull-refresh",{on:{refresh:t.refreshLoadArticleList},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[n("van-list",{attrs:{finished:t.finished,"loading-text":"加载中...","finished-text":"没有更多了"},on:{load:t.onLoadArticleList},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(e,a){return n("van-cell",{key:a,attrs:{title:e.title},on:{click:function(n){return t.$router.push("/article/"+e.art_id)}}})})),1)],1)],1)},ue=[],he={name:"ArticleListPage",props:{channel:{type:Object,required:!0}},data:function(){return{list:[],loading:!1,finished:!1,imestamp:null,isLoading:!1}},methods:{onLoadArticleList:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,n,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(X["e"])({channel_id:this.channel.id,timestamp:this.imestamp||Date.now(),with_top:1});case 2:n=t.sent,a=n.data,s=a.data.results,(e=this.list).push.apply(e,Object(Q["a"])(s)),this.loading=!1,s.length?this.imestamp=a.data.pre_timestamp:this.finished=!0;case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),refreshLoadArticleList:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,n,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(X["e"])({channel_id:this.channel.id,timestamp:Date.now(),with_top:1});case 2:n=t.sent,a=n.data,s=a.data.results,(e=this.list).unshift.apply(e,Object(Q["a"])(s)),this.isLoading=!1,this.$toast("更新了".concat(s.length,"条数据"));case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},created:function(){this.onLoadArticleList()}},fe=he,de=Object(k["a"])(fe,le,ue,!1,null,null,null),pe=de.exports,me=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"channel-edit"},[n("div",{staticClass:"van-nav-bar__title van-ellipsis",attrs:{"data-v-6275ee05":""}},[t._v("编辑频道")]),n("van-cell",{staticClass:"channel-title",attrs:{title:"我的频道",border:!1}},[n("span",{staticClass:"tip",attrs:{slot:"icon"},slot:"icon"},[t._v("点击进入频道")]),n("van-button",{attrs:{slot:"right-icon",round:"",type:"danger",size:"mini"},on:{click:function(e){t.isEditShow=!t.isEditShow}},slot:"right-icon"},[t._v(" "+t._s(t.isEditShow?"完成":"编辑")+" ")])],1),n("van-grid",{attrs:{gutter:10}},t._l(t.userChannels,(function(e,a){return n("van-grid-item",{key:e.id,staticClass:"channel-grid",on:{click:function(e){return t.onUserChannerClick(a)}}},[n("span",{staticClass:"text",class:{active:t.active===a},attrs:{slot:"text"},slot:"text"},[t._v(t._s(e.name))]),n("van-icon",{directives:[{name:"show",rawName:"v-show",value:t.isEditShow&&0!==a,expression:"isEditShow &&index!==0"}],staticClass:"channel-icon",attrs:{slot:"icon",name:"close"},slot:"icon"})],1)})),1),n("van-cell",{attrs:{title:"推荐频道",border:!1}},[n("span",{staticClass:"tip",attrs:{slot:"icon"},slot:"icon"},[t._v("点击添加频道")])]),n("van-grid",{attrs:{gutter:10}},t._l(t.remainingChannels,(function(e){return n("van-grid-item",{key:e.id,attrs:{text:e.name},on:{click:function(n){return t.addChannel(e)}}})})),1)],1)},ve=[],be=(n("7db0"),function(){return Object(c["a"])({method:"GET",url:"/app/v1_0/user/channels"})}),ge=function(){return Object(c["a"])({method:"GET",url:"/app/v1_0/channels"})},we={name:"ChannelEdit",props:{userChannels:{type:Array,required:!0},active:{type:Number,required:!0}},data:function(){return{isEditShow:!1,allChannels:[]}},methods:{onUserChannerClick:function(t){this.isEditShow&&0!==t?this.userChannels.splice(t,1):this.$emit("switch",t)},addChannel:function(t){this.userChannels.push(t)},loadAllChannels:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ge();case 2:e=t.sent,n=e.data,this.allChannels=n.data.channels;case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},computed:{remainingChannels:function(){var t=[],e=this.userChannels,n=this.allChannels;return n.forEach((function(n){e.find((function(t){return t.id===n.id}))||t.push(n)})),t}},watch:{userChannels:function(t){Object($["b"])("user-channels",t)}},created:function(){this.loadAllChannels()}},je=we,ke=(n("5838"),Object(k["a"])(je,me,ve,!1,null,"369899fe",null)),ye=ke.exports,Oe={name:"HomePage",components:{articleList:pe,channelEdit:ye},data:function(){return{isChannelEditShow:!1,active:0,userChannels:[]}},methods:{switchChannel:function(t){this.active=t,this.isChannelEditShow=!1},loadUserChannel:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,n,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e=[],n=Object($["a"])("user-channels"),!n){t.next=7;break}e=n,t.next=12;break;case 7:return t.next=9,be();case 9:a=t.sent,s=a.data,e=s.data.channels;case 12:this.userChannels=e,t.next=18;break;case 15:t.prev=15,t.t0=t["catch"](0),this.$toast.fail("加载数据失败");case 18:case"end":return t.stop()}}),t,this,[[0,15]])})));function e(){return t.apply(this,arguments)}return e}()},created:function(){this.loadUserChannel()}},Ce=Oe,xe=(n("9408"),Object(k["a"])(Ce,oe,ce,!1,null,"9bdcac5e",null)),_e=xe.exports,Se=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"question-container",staticStyle:{color:"pink"}},[t._v("问答正在开发中...")])},Ae=[],Pe={},Ee=Pe,Re=Object(k["a"])(Ee,Se,Ae,!1,null,null,null),De=Re.exports,Ie=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"video-container",staticStyle:{color:"pink"}},[t._v("视频正在开发中...")])},ze=[],Le={},Ue=Le,Te=Object(k["a"])(Ue,Ie,ze,!1,null,null,null),$e=Te.exports,Be=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("van-row",{staticClass:"my-container"},[t.$store.state.user?n("van-row",{staticClass:"my-info"},[n("van-row",{attrs:{type:"flex",align:"center"}},[n("van-col",{staticClass:"my-image",attrs:{span:"21"}},[n("van-image",{attrs:{src:t.user.photo,round:"",fit:"cover"},on:{click:function(e){return t.$router.push("/user/"+t.user.id)}}}),n("span",[t._v(t._s(t.user.name))])],1),n("van-button",{attrs:{round:"",size:"mini"},on:{click:function(e){return t.$router.push("/user/profile")}}},[t._v("编辑资料")])],1),n("van-grid",{staticClass:"data-info",attrs:{border:!1}},[n("van-grid-item",[n("span",[t._v(t._s(t.user.art_count))]),n("span",[t._v("头条")])]),n("van-grid-item",[n("span",[t._v(t._s(t.user.follow_count))]),n("span",[t._v("关注")])]),n("van-grid-item",[n("span",[t._v(t._s(t.user.fans_count))]),n("span",[t._v("粉丝")])]),n("van-grid-item",[n("span",[t._v(t._s(t.user.like_count))]),n("span",[t._v("获赞")])])],1)],1):n("van-row",{staticClass:"click-login"},[n("van-col",{staticClass:"click-login-image"}),n("span",{on:{click:function(e){return t.$router.push("/login")}}},[t._v("点击登录")])],1),n("van-grid",{attrs:{"column-num":3,border:!1,clickable:""}},[n("van-grid-item",{attrs:{text:"我的收藏",to:"/my-article/collect"}},[n("van-icon",{staticClass:"my-icon",attrs:{slot:"icon","class-prefix":"icon",name:"xingxing",color:"#eb5253"},slot:"icon"})],1),n("van-grid-item",{attrs:{text:"浏览历史",to:"/my-article/history"}},[n("van-icon",{staticClass:"my-icon",attrs:{slot:"icon","class-prefix":"icon",name:"browsing-history-o",color:"#ffa023"},slot:"icon"})],1),n("van-grid-item",{attrs:{text:"作品",to:"/my-article"}},[n("van-icon",{staticClass:"my-icon",attrs:{slot:"icon","class-prefix":"icon",name:"edit",color:"#678eff"},slot:"icon"})],1)],1),n("van-cell-group",{staticClass:"my-van-cell"},[n("van-cell",{attrs:{title:"消息通知","is-link":""}}),n("van-cell",{attrs:{title:"小智同学","is-link":""},on:{click:function(e){return t.$router.push("/user/chat")}}})],1),t.$store.state.user?n("van-button",{staticClass:"loginBtn",attrs:{plain:""},on:{click:t.userLoginOut}},[t._v("退出登录")]):t._e()],1)},Me=[],Fe={name:"MyPage",data:function(){return{user:{}}},methods:{loadUserInfo:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h();case 3:e=t.sent,n=e.data,this.user=n.data,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),this.$toast.fail("加载数据失败");case 11:case"end":return t.stop()}}),t,this,[[0,8]])})));function e(){return t.apply(this,arguments)}return e}(),userLoginOut:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$dialog.confirm({title:"是否退出",message:"退出当前头条账号，将不能同步收藏，发布评论和云端分享等"});case 3:this.$store.commit("setUser",null),t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),this.$dialog.close();case 9:case"end":return t.stop()}}),t,this,[[0,6]])})));function e(){return t.apply(this,arguments)}return e}()},created:function(){this.$store.state.user&&this.loadUserInfo()}},Ge=Fe,Ze=(n("5639"),Object(k["a"])(Ge,Be,Me,!1,null,"03ef207f",null)),He=Ze.exports;a["a"].use(s["a"]);var qe=[{name:"login",path:"/login",component:O},{path:"/",component:ie,children:[{name:"home",path:"",component:_e},{name:"question",path:"/question",component:De},{name:"video",path:"/video",component:$e},{name:"my",path:"/my",component:He}]},{name:"user-profile",path:"/user/profile",component:I},{name:"user-chat",path:"/user/chat",component:G},{name:"user",path:"/user/:userId",component:nt},{name:"search",path:"/search",component:bt},{name:"article",path:"/article/:articleId",component:te,props:!0},{name:"my-article",path:"/my-article/:type?",component:V,props:!0}],Ne=new s["a"]({routes:qe});e["a"]=Ne},a4b1:function(t,e,n){},a579:function(t,e,n){},ae1a:function(t,e,n){"use strict";var a=n("c100"),s=n.n(a);s.a},b3f5:function(t,e,n){},b775:function(t,e,n){"use strict";n("a4d3"),n("4de4"),n("e439"),n("dbb4"),n("b64b"),n("d3b7"),n("159b");var a=n("ade3"),s=(n("96cf"),n("1da1")),r=n("bc3a"),i=n.n(r),o=n("d604"),c=n.n(o),l=n("4360"),u=n("a18c");function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){Object(a["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var d=i.a.create({baseURL:"http://ttapi.research.itcast.cn/"});function p(){u["a"].push({name:"login",query:{redirect:u["a"].currentRoute.fullPath}})}d.defaults.transformResponse=[function(t){try{return c.a.parse(t)}catch(e){return{}}}],d.interceptors.request.use((function(t){var e=l["a"].state.user;return e&&(t.headers.Authorization="Bearer ".concat(e.token)),t}),(function(t){return Promise.reject(t)})),d.interceptors.response.use((function(t){return t}),function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var n,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.response||401!==e.response.status){t.next=17;break}if(n=l["a"].state.user,n&&n.refresh_token){t.next=5;break}return p(),t.abrupt("return");case 5:return t.prev=5,t.next=8,i()({method:"PUT",url:"http://ttapi.research.itcast.cn/app/v1_0/authorizations",Headers:{Authorization:"Bearer ".concat(n.refresh_token)}});case 8:return a=t.sent,s=a.data,l["a"].commit("setUser",f({},n,{token:s.data.token})),t.abrupt("return",d(e.config));case 14:t.prev=14,t.t0=t["catch"](5),p();case 17:return t.abrupt("return",Promise.reject(e));case 18:case"end":return t.stop()}}),t,null,[[5,14]])})));return function(e){return t.apply(this,arguments)}}()),e["a"]=d},bbc4:function(t,e,n){"use strict";var a=n("2f07"),s=n.n(a);s.a},bdcc:function(t,e,n){"use strict";var a=n("58f3"),s=n.n(a);s.a},beb8:function(t,e,n){"use strict";var a=n("e91f"),s=n.n(a);s.a},c100:function(t,e,n){},e08b:function(t,e,n){"use strict";var a=n("1477"),s=n.n(a);s.a},e91f:function(t,e,n){}});
//# sourceMappingURL=app.b8194c70.js.map